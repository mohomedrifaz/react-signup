import React, {useState} from "react";
import './SelectLocation.css';
import SelectCountry from "./SelectCountry";

const SelectLocation = ({ onNext }) => {

    const countries = [
        {
            flag: `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_3150_15677)">
            <path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#F0F0F0"/>
            <path d="M0 16.0001C0 7.1635 7.1635 0 16 0C24.8365 0 32 7.1635 32 16.0001" fill="#D80027"/>
            <path d="M9.73934 8.34802C9.73934 6.01689 11.3777 4.06952 13.5654 3.5917C13.2292 3.51833 12.8803 3.47852 12.5219 3.47852C9.83247 3.47852 7.65234 5.65864 7.65234 8.34808C7.65234 11.0375 9.83247 13.2176 12.5219 13.2176C12.8802 13.2176 13.2291 13.1778 13.5654 13.1044C11.3777 12.6266 9.73934 10.6792 9.73934 8.34802Z" fill="#F0F0F0"/>
            <path d="M16 3.82666L16.3454 4.88947H17.4629L16.5587 5.54641L16.9041 6.60923L16 5.95241L15.0959 6.60923L15.4412 5.54641L14.5371 4.88947H15.6546L16 3.82666Z" fill="#F0F0F0"/>
            <path d="M13.2892 5.91284L13.6345 6.97572H14.752L13.8479 7.63259L14.1933 8.6954L13.2892 8.03859L12.3849 8.6954L12.7304 7.63259L11.8262 6.97572H12.9437L13.2892 5.91284Z" fill="#F0F0F0"/>
            <path d="M18.7109 5.91284L19.0564 6.97572H20.1739L19.2697 7.63259L19.6151 8.6954L18.7109 8.03859L17.8068 8.6954L18.1522 7.63259L17.248 6.97572H18.3656L18.7109 5.91284Z" fill="#F0F0F0"/>
            <path d="M17.668 9.04443L18.0133 10.1073H19.1308L18.2267 10.7642L18.5721 11.827L17.668 11.1702L16.7638 11.827L17.1092 10.7642L16.2051 10.1073H17.3225L17.668 9.04443Z" fill="#F0F0F0"/>
            <path d="M14.3321 9.04443L14.6774 10.1073H15.795L14.8908 10.7642L15.2363 11.827L14.3321 11.1702L13.4279 11.827L13.7733 10.7642L12.8691 10.1073H13.9867L14.3321 9.04443Z" fill="#F0F0F0"/>
            </g>
            <defs>
            <clipPath id="clip0_3150_15677">
            <rect width="32" height="32" fill="white"/>
            </clipPath>
            </defs>
            </svg>`,
            city: 'Singapore',
            country: 'Singapore',
            signal: `<svg width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21.5 0.5C22.0078 0.5 22.4375 0.929688 22.4375 1.4375V19.5625C22.4375 20.1094 22.0078 20.5 21.5 20.5C20.9531 20.5 20.5625 20.1094 20.5625 19.5625V1.4375C20.5625 0.929688 20.9531 0.5 21.5 0.5ZM16.5 4.25C17.0078 4.25 17.4375 4.67969 17.4375 5.1875V19.5625C17.4375 20.1094 17.0078 20.5 16.5 20.5C15.9531 20.5 15.5625 20.1094 15.5625 19.5625V5.1875C15.5625 4.67969 15.9531 4.25 16.5 4.25ZM11.5 8C12.0078 8 12.4375 8.42969 12.4375 8.9375V19.5625C12.4375 20.1094 12.0078 20.5 11.5 20.5C10.9531 20.5 10.5625 20.1094 10.5625 19.5625V8.9375C10.5625 8.42969 10.9531 8 11.5 8ZM6.5 11.75C7.00781 11.75 7.4375 12.1797 7.4375 12.6875V19.5625C7.4375 20.1094 7.00781 20.5 6.5 20.5C5.95312 20.5 5.5625 20.1094 5.5625 19.5625V12.6875C5.5625 12.1797 5.95312 11.75 6.5 11.75ZM1.5 15.5C2.00781 15.5 2.4375 15.9297 2.4375 16.4375V19.5625C2.4375 20.1094 2.00781 20.5 1.5 20.5C0.953125 20.5 0.5625 20.1094 0.5625 19.5625V16.4375C0.5625 15.9297 0.953125 15.5 1.5 15.5Z" fill="#039855"/>
            </svg>`,
        },
        {
            flag: `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_3150_15316)">
            <path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#F0F0F0"/>
            <path d="M15.3047 16.0001H32.0003C32.0003 14.556 31.8078 13.157 31.4491 11.8262H15.3047V16.0001Z" fill="#D80027"/>
            <path d="M15.3047 7.65148H29.6519C28.6725 6.05323 27.4202 4.64054 25.9601 3.47754H15.3047V7.65148Z" fill="#D80027"/>
            <path d="M15.9988 32.0002C19.7644 32.0002 23.2254 30.6987 25.9586 28.522H6.03906C8.77219 30.6987 12.2332 32.0002 15.9988 32.0002Z" fill="#D80027"/>
            <path d="M2.34797 24.3465H29.6512C30.4375 23.0635 31.0473 21.661 31.4484 20.1726H0.550781C0.951844 21.661 1.56166 23.0635 2.34797 24.3465Z" fill="#D80027"/>
            <path d="M7.4115 2.49863H8.86956L7.51331 3.48394L8.03137 5.07825L6.67519 4.09294L5.319 5.07825L5.7665 3.70094C4.57237 4.69562 3.52575 5.861 2.66325 7.1595H3.13044L2.26712 7.78669C2.13262 8.01106 2.00362 8.239 1.88 8.47031L2.29225 9.73913L1.52313 9.18031C1.33194 9.58537 1.15706 9.99956 0.999875 10.4224L1.45406 11.8204H3.13044L1.77419 12.8057L2.29225 14.4L0.936063 13.4147L0.123687 14.0049C0.042375 14.6586 0 15.3243 0 16H16C16 7.1635 16 6.12175 16 0C12.8393 0 9.89281 0.916875 7.4115 2.49863ZM8.03137 14.4L6.67519 13.4147L5.319 14.4L5.83706 12.8057L4.48081 11.8204H6.15719L6.67519 10.2261L7.19319 11.8204H8.86956L7.51331 12.8057L8.03137 14.4ZM7.51331 8.14481L8.03137 9.73913L6.67519 8.75381L5.319 9.73913L5.83706 8.14481L4.48081 7.1595H6.15719L6.67519 5.56519L7.19319 7.1595H8.86956L7.51331 8.14481ZM13.7705 14.4L12.4143 13.4147L11.0581 14.4L11.5762 12.8057L10.2199 11.8204H11.8963L12.4143 10.2261L12.9323 11.8204H14.6087L13.2524 12.8057L13.7705 14.4ZM13.2524 8.14481L13.7705 9.73913L12.4143 8.75381L11.0581 9.73913L11.5762 8.14481L10.2199 7.1595H11.8963L12.4143 5.56519L12.9323 7.1595H14.6087L13.2524 8.14481ZM13.2524 3.48394L13.7705 5.07825L12.4143 4.09294L11.0581 5.07825L11.5762 3.48394L10.2199 2.49863H11.8963L12.4143 0.904312L12.9323 2.49863H14.6087L13.2524 3.48394Z" fill="#0052B4"/>
            </g>
            <defs>
            <clipPath id="clip0_3150_15316">
            <rect width="32" height="32" fill="white"/>
            </clipPath>
            </defs>
            </svg>
            `,
            city: 'Washington DC',
            country: 'USA East',
            signal: `<svg width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21.5 0.5C22.0078 0.5 22.4375 0.929688 22.4375 1.4375V19.5625C22.4375 20.1094 22.0078 20.5 21.5 20.5C20.9531 20.5 20.5625 20.1094 20.5625 19.5625V1.4375C20.5625 0.929688 20.9531 0.5 21.5 0.5ZM16.5 4.25C17.0078 4.25 17.4375 4.67969 17.4375 5.1875V19.5625C17.4375 20.1094 17.0078 20.5 16.5 20.5C15.9531 20.5 15.5625 20.1094 15.5625 19.5625V5.1875C15.5625 4.67969 15.9531 4.25 16.5 4.25ZM11.5 8C12.0078 8 12.4375 8.42969 12.4375 8.9375V19.5625C12.4375 20.1094 12.0078 20.5 11.5 20.5C10.9531 20.5 10.5625 20.1094 10.5625 19.5625V8.9375C10.5625 8.42969 10.9531 8 11.5 8ZM6.5 11.75C7.00781 11.75 7.4375 12.1797 7.4375 12.6875V19.5625C7.4375 20.1094 7.00781 20.5 6.5 20.5C5.95312 20.5 5.5625 20.1094 5.5625 19.5625V12.6875C5.5625 12.1797 5.95312 11.75 6.5 11.75ZM1.5 15.5C2.00781 15.5 2.4375 15.9297 2.4375 16.4375V19.5625C2.4375 20.1094 2.00781 20.5 1.5 20.5C0.953125 20.5 0.5625 20.1094 0.5625 19.5625V16.4375C0.5625 15.9297 0.953125 15.5 1.5 15.5Z" fill="#039855"/>
            </svg>
            `,
        },
        {
            flag: `<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_3150_17880)">
            <path d="M16 32C24.8366 32 32 24.8366 32 16C32 7.16344 24.8366 0 16 0C7.16344 0 0 7.16344 0 16C0 24.8366 7.16344 32 16 32Z" fill="#F0F0F0"/>
            <path d="M32.0005 16.0015C32.0005 9.65811 28.309 4.17711 22.957 1.58911V30.4138C28.309 27.8259 32.0005 22.3449 32.0005 16.0015Z" fill="#D80027"/>
            <path d="M0 16.0005C0 22.3439 3.69156 27.8249 9.0435 30.4129V1.58813C3.69156 4.17613 0 9.65713 0 16.0005Z" fill="#D80027"/>
            <path d="M18.7834 18.0883L21.5659 16.697L20.1747 16.0014V14.6101L17.392 16.0014L18.7834 13.2188H17.392L16.0007 11.1318L14.6094 13.2188H13.2181L14.6094 16.0014L11.8268 14.6101V16.0014L10.4355 16.697L13.2181 18.0883L12.5225 19.4796H15.3051V21.5666H16.6964V19.4796H19.479L18.7834 18.0883Z" fill="#D80027"/>
            </g>
            <defs>
            <clipPath id="clip0_3150_17880">
            <rect width="32" height="32" fill="white"/>
            </clipPath>
            </defs>
            </svg>
            `,
            city: 'Montreal',
            country: 'Canada East',
            signal: `<svg width="23" height="21" viewBox="0 0 23 21" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21.5 0.5C22.0078 0.5 22.4375 0.929688 22.4375 1.4375V19.5625C22.4375 20.1094 22.0078 20.5 21.5 20.5C20.9531 20.5 20.5625 20.1094 20.5625 19.5625V1.4375C20.5625 0.929688 20.9531 0.5 21.5 0.5ZM16.5 4.25C17.0078 4.25 17.4375 4.67969 17.4375 5.1875V19.5625C17.4375 20.1094 17.0078 20.5 16.5 20.5C15.9531 20.5 15.5625 20.1094 15.5625 19.5625V5.1875C15.5625 4.67969 15.9531 4.25 16.5 4.25ZM11.5 8C12.0078 8 12.4375 8.42969 12.4375 8.9375V19.5625C12.4375 20.1094 12.0078 20.5 11.5 20.5C10.9531 20.5 10.5625 20.1094 10.5625 19.5625V8.9375C10.5625 8.42969 10.9531 8 11.5 8ZM6.5 11.75C7.00781 11.75 7.4375 12.1797 7.4375 12.6875V19.5625C7.4375 20.1094 7.00781 20.5 6.5 20.5C5.95312 20.5 5.5625 20.1094 5.5625 19.5625V12.6875C5.5625 12.1797 5.95312 11.75 6.5 11.75ZM1.5 15.5C2.00781 15.5 2.4375 15.9297 2.4375 16.4375V19.5625C2.4375 20.1094 2.00781 20.5 1.5 20.5C0.953125 20.5 0.5625 20.1094 0.5625 19.5625V16.4375C0.5625 15.9297 0.953125 15.5 1.5 15.5Z" fill="#039855"/>
            </svg>
            `,
        },
    ];

    const [selectedCardIndex, setSelectedCardIndex] = useState({
        country: null,
    });

    const [selectedPlan, setSelectedPlan] = useState(null);

    const handleCardSelection = (index, category) => {
        setSelectedCardIndex((prevSelectedCardIndex) => {
            const newSelectedCardIndex = {...prevSelectedCardIndex};
            newSelectedCardIndex[category] = index;
            return newSelectedCardIndex;
        });

        const selectedPlan = countries[index] ;
        setSelectedPlan(selectedPlan)

        console.log("Selected Country - ", selectedPlan.country , "Selected City - ", selectedPlan.city);
    };


    const locationVerification = () => {
        onNext(selectedPlan);
    }

    return (
        <div className="data-centers-container">

            <div className="main-title">
                <h2> Data Centers </h2>
            </div>

            <div className="data-map-container">

            </div>

            <div className="country-select-container">
                {countries.map(( country, index ) => (
                    <SelectCountry key={index} flag={country.flag} city={country.city} country={country.country}
                    signal={country.signal}
                    isSelected={index === selectedCardIndex.country}
                    onClick={() => handleCardSelection(index, "country")}
                        />
                ))}
            </div>

            <div className="action-btn">
                <button className="back-btn">
                    Previous Step
                </button>
                <button
                    className="verify-btn"
                    onClick={locationVerification}>
                    Next
                </button>
            </div>

        </div>
    );
};

export default SelectLocation;
